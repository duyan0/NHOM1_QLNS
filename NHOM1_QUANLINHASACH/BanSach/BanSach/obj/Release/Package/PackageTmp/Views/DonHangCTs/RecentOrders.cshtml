@model IEnumerable<BanSach.Models.RecentOrderViewModel>

<head>
    <!-- Cài đặt OwlCarousel -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.theme.default.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js"></script>
</head>

<div class="container-fluid">
    <p class="text-center text-white fw-semibold mb-3" style="font-size: 26px;">Bán gần đây nhất</p>

    <!-- Owl Carousel -->
    <div class="owl-carousel related-carousel owl-theme">
        @foreach (var i in Model)
        {
            <div class="item">
                <div class="card product-item">
                    <a href="~/SanPhams/TrangSP/@i.Id" class="text-decoration-none">
                        <div class="card-body">
                            <!-- Ảnh sản phẩm với kích thước cố định -->
                            <img src="~/Content/img/@i.HinhAnh" alt="Ảnh sản phẩm @i.TenSanPham" class="img-fluid rounded-3">
                            <!-- Tên sản phẩm -->
                            <p class="text-truncate text-dark w-100 text-left" title="@i.TenSanPham">@i.TenSanPham</p>
                            <!-- Ngày đặt hàng -->
                            <p class="text-truncate text-dark w-100 text-left date" title="@i.NgayDatHang.ToString("dd/MM/yyyy HH:mm:ss")">
                                @i.NgayDatHang.ToString("dd/MM/yyyy HH:mm:ss")
                            </p>
                            <p class="text-danger fw-bold fs-6">@i.Gia.ToString($"#,#") VND</p>
                        </div>
                    </a>
                </div>
            </div>
        }
    </div>
    <div>
        <p class="justify-content-center text-center">
            <a href="~/SanPhams/ProductList" class="text-decoration-none btn btn-outline-danger py-2 px-2 mt-2">Xem thêm</a>
        </p>
    </div>
</div>

<div class="bg-secondary">
    <hr />
</div>

<style>
    /* Cấu hình cho owl-carousel */
    .owl-carousel .item {
        width: 20%; /* Mỗi item chiếm 1/5 chiều rộng của container */
        padding: 5px;
        box-sizing: border-box;
    }

    .owl-carousel .card {
        height: 330px;
        border: 1px solid #ddd;
        border-radius: 8px;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        overflow: hidden;
    }

    .owl-carousel .card-body {
        padding: 10px;
        text-align: left;
    }

    /* Cấu hình cho hình ảnh trong carousel */
    .owl-carousel img {
        height: 190px;
        width: 100%;
        object-fit: cover; /* Đảm bảo hình ảnh không bị méo */
        border-radius: 8px;
    }

    .owl-carousel .card-body p {
        margin-top: 5px;
        font-size: 16px;
    }

    /* Loại bỏ navigation và dots */
    .related-carousel .owl-nav, .related-carousel .owl-dots {
        display: none;
    }
</style>

<script>
    $(document).ready(function () {
        $(".related-carousel").owlCarousel({
            items: 5, // Hiển thị 5 item mặc định
            margin: 10, // Khoảng cách giữa các item
            loop: true,
            auautoplayTimeout: 6000, // Lặp lại carousel
            autoplay: true,     // Thời gian giữa mỗi lần chuyển ảnh (3 giây)
            autoplayHoverPause: true, // Dừng autoplay khi hover vào ảnh
            nav: false, // Tắt nút điều hướng
            dots: false, // Tắt dots
            responsive: {
                0: {
                    items: 1 // Hiển thị 1 item trên màn hình nhỏ
                },
                600: {
                    items: 3 // Hiển thị 3 item trên màn hình từ 600px
                },
                1000: {
                    items: 5 // Hiển thị 5 item trên màn hình từ 1000px
                }
            }
        });
    });
</script>
